summary: "구글 소셜 로그인 및 자동 회원가입"
tags:
  - Auth

description: |
  **핵심 로직:**
  1. 프론트엔드에서 전달받은 `id_token`을 Google API를 통해 검증합니다.
  2. 보안을 위해 내부 서버 통신용 보안키(`X-INTERNAL-KEY`)를 체크합니다.
  3. 신규 이메일이면 DB에 유저 정보를 자동 생성(회원가입)합니다. (`is_admin` 기본값: false)
  4. 기존 유저라면 프로필 사진 등 최신 정보를 업데이트합니다.

  **반환 데이터(Response Data) 의미:**
  - `user_id`: **유저 고유 번호** => DB에 등록된 유저의 식별 ID입니다.
  - `username`: **닉네임** => 구글 계정 기반 닉네임(중복 시 랜덤값 추가)입니다.
  - `email`: **이메일** => 가입된 구글 이메일 주소입니다.
  - `profile_pic`: **프로필 사진** => 구글 프로필 이미지 URL입니다.
  - `is_admin`: **관리자 여부** => 해당 유저의 관리자 권한 보유 여부(true/false)입니다.

parameters:
  - name: X-INTERNAL-KEY
    in: header
    type: string
    required: true
    description: "내부 서버 동기화용 보안키"
  - name: Authorization
    in: header
    type: string
    required: true
    description: "Bearer {Google_ID_Token} 형식으로 전달"

responses:
  200:
    description: "로그인/회원가입 성공"
    schema:
      type: object
      properties:
        success: {type: boolean, example: true}
        message: {type: string, example: "로그인 성공"}
        data:
          type: object
          properties:
            user_id: {type: integer, example: 1}
            username: {type: string, example: "권민성"}
            email: {type: string, example: "user@gmail.com"}
            profile_pic: {type: string, example: "http://googleusercontent.com/..."}
            is_admin: {type: boolean, example: false}
  401:
    description: "유효하지 않은 구글 토큰"
  403:
    description: "보안키 불일치"